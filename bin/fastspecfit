#!/usr/bin/env python
"""fastspecfit for DESI.

fastspecfit /global/cfs/cdirs/desi/spectro/redux/daily/tiles/80608/20201215/zbest-9-80608-20201215.fits -o specfit.fits --ntargets 2 --mp 1
fastspecfit /global/cfs/cdirs/desi/spectro/redux/daily/tiles/80605/20201215/zbest-9-80605-20201215.fits -o photfit.fits --ntargets 2 --mp 1 --photfit

"""
import os
from desiutil.log import get_logger
from fastspecfit import fastspecfit

log = get_logger()

for key in ['FASTSPECFIT_DATA', 'FASTSPECFIT_TEMPLATES']:
    if key not in os.environ:
        log.fatal('Required ${} environment variable not set'.format(key))
        raise EnvironmentError('Required ${} environment variable not set'.format(key))

fastspecfit.main(comm=None)

